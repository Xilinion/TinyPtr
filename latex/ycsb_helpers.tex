% Helper function for addplot commands
% #1 = style name, #2 = object_id, #3 = throughput type, #4 = case_id, #5 = entry_id
\newcommand{\addDataPlot}[5]{%
\addplot[#1] table[y expr=\thisrow{#3 (ops/s)}/1000000, restrict expr to domain={\thisrow{entry_id}}{#5:#5}, restrict expr to domain={\thisrow{case_id}}{#4:#4}, restrict expr to domain={\thisrow{object_id}}{#2:#2}]{\data};%
}

% Function to add all 5 plots for standard objects (6,7,15,17,20)
% #1 = case_id, #2 = throughput type, #3 = entry_id
\newcommand{\addAllStandardPlots}[3]{%
\addDataPlot{CuckooStyle}{6}{#2}{#1}{#3}
\addDataPlot{IcebergStyle}{7}{#2}{#1}{#3}
\addDataPlot{JunctionStyle}{15}{#2}{#1}{#3}
\addDataPlot{TPHTStyle}{17}{#2}{#1}{#3}
\addDataPlot{BlastStyle}{20}{#2}{#1}{#3}
}

% Function to add all 5 plots for resizing objects (6,7,15,18,21)
% #1 = case_id, #2 = throughput type, #3 = entry_id
\newcommand{\addAllResizingPlots}[3]{%
\addDataPlot{CuckooStyle}{6}{#2}{#1}{#3}
\addDataPlot{IcebergStyle}{7}{#2}{#1}{#3}
\addDataPlot{JunctionStyle}{15}{#2}{#1}{#3}
\addDataPlot{TPHTStyle}{18}{#2}{#1}{#3}
\addDataPlot{BlastStyle}{21}{#2}{#1}{#3}
}

% Define the 2D dictionary for case_id and entry_id mappings
% When entry_id=0, all case_ids map to "Load"
% When entry_id=1: 17→Run A, 18→Run B, 19→Run C, 20→Run A^-, 21→Run B^-, 22→Run C^-
\def\getlabelname#1#2{%
    \ifnum#2=0%
        Load%
    \else%
        \ifnum#1=17 Run A\fi%
        \ifnum#1=18 Run B\fi%
        \ifnum#1=19 Run C\fi%
        \ifnum#1=20 Run A$^-$\fi%
        \ifnum#1=21 Run B$^-$\fi%
        \ifnum#1=22 Run C$^-$\fi%
    \fi%
}

% Function to generate a subfigure with specified parameters
% #1 = case_id (17, 18, 19, 20, 21, 22)
% #2 = caption (Load, Run A, Run B, etc.)
% #3 = throughput type (fill_throughput or run_throughput)
% #4 = entry_id (0 or 1)
\newcommand{\generateSubfigure}[4]{%
\begin{subfigure}[b]{0.24\textwidth}
\centering
\begin{tikzpicture}
\begin{axis}[
    width=3.8cm,
    height=3.8cm,
    ylabel={Throughput (M/s)},
    ybar,
    bar width=5pt,
    xticklabels={},
    xtick style={draw=none},
    axis lines=box,
    tick align=inside,
    scaled ticks=true,
    tick label style={/pgf/number format/fixed,/pgf/number format/precision=1},
    ymajorgrids=true,
    yminorgrids=true,
    minor tick num=1,
    max space between ticks=35pt,
    try min ticks=5,
    grid style={gray!30},
    ymin=0
]
\addAllStandardPlots{#1}{#3}{#4}
\end{axis}
\end{tikzpicture}
\caption{#2}
\end{subfigure}%
}

% Special command for the first subfigure that creates the legend
% #4 = entry_id (0 or 1)
\newcommand{\generateFirstSubfigure}[4]{%
\begin{subfigure}[b]{0.24\textwidth}
\centering
\begin{tikzpicture}
\begin{axis}[
    width=3.8cm,
    height=3.8cm,
    ylabel={Throughput (M/s)},
    ybar,
    bar width=5pt,
    xticklabels={},
    xtick style={draw=none},
    axis lines=box,
    tick align=inside,
    scaled ticks=true,
    tick label style={/pgf/number format/fixed,/pgf/number format/precision=1},
    ymajorgrids=true,
    yminorgrids=true,
    minor tick num=1,
    max space between ticks=35pt,
    try min ticks=5,
    grid style={gray!30},
    ymin=0,
    legend entries = {Cuckoo, Iceberg, Junction, TPHT, Blast},
    legend cell align = left,
    legend style={draw=none},
    legend to name={throughput-legend}
]
\addAllStandardPlots{#1}{#3}{#4}
\end{axis}
\end{tikzpicture}
\caption{#2}
\end{subfigure}%
}

% Special command for the first subfigure that creates the legend for resizing figure
% Uses resizable variants: object 18 instead of 17, object 21 instead of 20
\newcommand{\generateFirstSubfigureResizing}[4]{%
\begin{subfigure}[b]{0.24\textwidth}
\centering
\begin{tikzpicture}
\begin{axis}[
    width=3.8cm,
    height=3.8cm,
    ylabel={Throughput (M/s)},
    ybar,
    bar width=5pt,
    xticklabels={},
    xtick style={draw=none},
    axis lines=box,
    tick align=inside,
    scaled ticks=true,
    tick label style={/pgf/number format/fixed,/pgf/number format/precision=1},
    ymajorgrids=true,
    yminorgrids=true,
    minor tick num=1,
    max space between ticks=35pt,
    try min ticks=5,
    grid style={gray!30},
    ymin=0,
    legend entries = {Cuckoo, Iceberg, Junction, TPHT, Blast},
    legend cell align = left,
    legend style={draw=none},
    legend to name={throughput-legend-resizing}
]
\addAllResizingPlots{#1}{#3}{#4}
\end{axis}
\end{tikzpicture}
\caption{#2}
\end{subfigure}%
}

% Function to generate a subfigure for resizing variants
% Uses resizable variants: object 18 instead of 17, object 21 instead of 20
\newcommand{\generateSubfigureResizing}[4]{%
\begin{subfigure}[b]{0.24\textwidth}
\centering
\begin{tikzpicture}
\begin{axis}[
    width=3.8cm,
    height=3.8cm,
    ylabel={Throughput (M/s)},
    ybar,
    bar width=5pt,
    xticklabels={},
    xtick style={draw=none},
    axis lines=box,
    tick align=inside,
    scaled ticks=true,
    tick label style={/pgf/number format/fixed,/pgf/number format/precision=1},
    ymajorgrids=true,
    yminorgrids=true,
    minor tick num=1,
    max space between ticks=35pt,
    try min ticks=5,
    grid style={gray!30},
    ymin=0
]
\addAllResizingPlots{#1}{#3}{#4}
\end{axis}
\end{tikzpicture}
\caption{#2}
\end{subfigure}%
} 